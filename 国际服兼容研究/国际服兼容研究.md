# 国际服兼容研究

研究人：`LiuJiewenTT <liuljwtt@163.com>`

2024-02-05: 

通过比较`%APPDATA%\..\Local\Game\Saved`在启动国际服游戏本体前后的变化，可以确认以下信息：

1. 国服国际服有分开，有自己的xg编号，但是分离没做清楚。
   1. 国服为`xg_111111639`
   2. 国际服为`xg_111111680`
2. `Logs`作为运行日志出现变动可以理解。
3. `CrashReportClient`暂且不管。
4. `Config\WindowsNoEditior`出现大量变动，十分可疑。
   1. 其中，`Engine.ini`和`Game.ini`出现了文件大小变化。
5. `PersistentDownloadDir`中的`User.settings`时间戳被更新，内容未确认。
6. `SaveGames`中新增`XGSDK_SAVE_GAME.sav`

此外，如果切回国服发现要重新下载资源，但是明明文件都在，那可能是由于`data\manifest.json`内容缺失导致的。重新下载时，通过vscode观察此文件，可以发现为文件末尾一直在追加内容，而国际服目录的不会同步更新，可以确认是由于曾经尝试国际服启动器共用国服资源导致的内容列表数据丢失。所以`data\manifest.json`文件也是很重要的，注意备份。

> 此外再额外提一嘴，国服国际服的资源版本确实不太一样，在今日的实验中，在已经成功启动了最新版国际服的前提下，发现国服版本已经是`1.5.0.143`，然而国际服还是`1.5.0.120`。

随后我成功启动了国服（B服），发现在排除`Logs`(日志)和`CrashReportClient`之后，发生变化的有：`Config\WindowsNoEditor\Engine.ini`（有文件大小变化）。

另外，由于再次进入时可能是未同意协议的状态，同意且登录后发现`PersistentDownloadDir\`目录下的`startup.settings`和`User.settings`发生时间戳变化（未确认内容）。而`Config\WindowsNoEditor`变化如同`after-2.txt`和`after-3.txt`一般，其中出现文件大小变化的有：`Game.ini`和`Input.ini`。

由于此时暂未完成国际服登录，故暂时不能确认`Config\WindowsNoEditor\Game.ini`是否能被正常修改。而`Config\WindowsNoEditor\Engine.ini`想必是启动游戏但未登录就已经用到了，从上面的成功启动国际服游戏本体和成功启动国服（B服）游戏本体可以基本认为此文件不造成无法启动的冲突。

登录国际服后，`SaveGames`下`XGSDK_LOGIN_USER.sav`存在修改。注册过程会打开页面，对应的`webcache`下多出`Visited Links`，其下的`Cache`也有变化。此外就是`xg_111111680`出现改变，这个文件夹是属于国际服的文件夹，没什么好研究的。

综上，`%APPDATA%\..\Local\Game\Saved`在2024年已不存在冲突，**国服国际服现今仍然不可以都安装在同一台电脑上属于谣言**。

---

